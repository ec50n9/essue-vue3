<script setup lang="ts">
import Button from "../components/EcButton.vue"
import FloatingLabel from "../components/FloatingLabel.vue";
import {ref} from "vue";
import Toast from "../components/toast";

const mode = ref<'login' | 'register'>('login')

const loginForm = ref({
  username: '',
  password: ''
})

const loginHandler = () => {
  console.log(loginForm.value)
}
const registerHandler = () => {

}
</script>

<template>
  <div class="bg-wrapper absolute inset-0 flex items-center justify-center bg-gradient-to-br from-green-400 to-blue-500">
    <!--å¡ç‰Œå®¹å™¨-->
    <div :class="mode==='register'?'is-flipped':''" class="flip-wrapper w-96">
      <!--ç™»å½•è¡¨å•-->
      <div class="flip-a flex flex-col gap-y-6
              p-8 bg-white rounded-lg shadow-xl">
        <div>
          <h1 class="mb-2 text-3xl text-gray-700">åˆ«æ¥æ— æ™ï¼</h1>
          <p class="text-gray-500">å¿«ç™»å½•ï¼Œæ‹¿å›å±äºä½ çš„ä¸€åˆ‡ï½</p>
        </div>
        <FloatingLabel class="bg-white rounded-lg" name="username" type="outlined" v-model="loginForm.username"
                       place-holder="è´¦å·"/>
        <FloatingLabel class="bg-white rounded-lg" name="password" type="outlined" v-model="loginForm.password"
                       place-holder="å¯†ç " cover/>
        <div>
          <Button type="primary" class="w-full" @click="loginHandler">ç™»å½•</Button>
          <p class="my-2 text-center text-gray-500 text-sm">æ²¡æœ‰è´¦å·ï¼Ÿä½ å¯ä»¥ğŸ‘‡</p>
          <div class="flex gap-4">
            <Button type="primary" class="flex-grow" @click="$router.back()" outlined>å–æ¶ˆ</Button>
            <Button type="orange" class="flex-grow" @click="mode = 'register'">å‰å¾€æ³¨å†Œ</Button>
          </div>
        </div>
      </div>
      <!--æ³¨å†Œè¡¨å•-->
      <div class="flip-b flex flex-col gap-y-6
              p-8 bg-white rounded-lg shadow-xl">
        <div>
          <h1 class="mb-2 text-3xl text-gray-700">åˆæ¬¡è§é¢ï¼</h1>
          <p class="text-gray-500">ğŸ‘£ åœ¨è¿™é‡Œç•™ä¸‹ä½ çš„è¶³è¿¹å­ï½</p>
        </div>
        <FloatingLabel class="bg-white rounded-lg" name="reg_username" type="outlined" v-model="loginForm.username"
                       place-holder="è´¦å·"/>
        <FloatingLabel class="bg-white rounded-lg" name="reg_password" type="outlined" v-model="loginForm.password"
                       place-holder="å¯†ç " cover/>
        <FloatingLabel class="bg-white rounded-lg" name="reg_nickname" type="outlined" v-model="loginForm.username"
                       place-holder="æ˜µç§°"/>
        <div>
          <Button type="orange" class="w-full" @click="loginHandler">æ³¨å†Œ</Button>
          <p class="my-2 text-center text-gray-500 text-sm">å·²ç»æœ‰è´¦å·å•¦ï¼Ÿä½ å¯ä»¥ğŸ‘‡</p>
          <div class="flex gap-4">
            <Button type="primary" class="flex-grow" @click="mode = 'login'">
              è¿”å›ç™»å½•
            </Button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<style scoped>
.bg-wrapper{
  perspective: 1000px;
}

.flip-wrapper {
  @apply relative duration-500 ease-in-out;
  transform-style: preserve-3d;
}

.flip-b {
  @apply absolute inset-x-0 top-0;
  transform: rotateY(-180deg);
}

.flip-a, .flip-b {
  backface-visibility: hidden;
}

.flip-wrapper.is-flipped {
  transform: rotateY(180deg);
}
</style>